# Книга рецептов (Android, Kotlin, Jetpack Compose)

Приложение для просмотра, поиска и добавления рецептов с локальным хранением, базовой авторизацией, кастомными UI-компонентами, сетевыми данными и обфускацией кода.

## Описание

Это Android-приложение предоставляет полнофункциональную книгу рецептов с возможностью просмотра, добавления и управления рецептами. Приложение разработано с использованием современных технологий Android и следует лучшим практикам разработки.

## Реализованные требования

### 1. ✅ Минимум 4 экрана
- **Home (Главная)** — главный экран с категориями, поиском и популярными рецептами
- **Catalog (Каталог)** — полный список всех рецептов
- **Recipe Detail (Детали рецепта)** — подробная информация о рецепте с ингредиентами и инструкциями
- **Add Recipe (Добавить рецепт)** — форма для добавления нового рецепта
- **Profile (Профиль)** — экран профиля пользователя с авторизацией

### 2. ✅ Навигация
- Реализована навигация с использованием **Navigation Compose**
- Bottom Navigation Bar для переключения между основными экранами
- Навигационные переходы с передачей параметров (например, ID рецепта)
- Поддержка back stack и сохранение состояния

### 3. ✅ 2+ кастомных UI-компонента
- **AnimatedFavoriteButton** — анимированная кнопка избранного с плавной анимацией масштаба и цвета
- **ProgressBadge** — динамический индикатор сложности рецепта с круговой прогресс-анимацией
- **RecipeCard** — переиспользуемая карточка рецепта с изображением, информацией и действиями

### 4. ✅ Хранение данных
- **Room Database** — локальное хранилище для рецептов
- **DataStore** — хранение пользовательских настроек и токена авторизации
- Полная поддержка CRUD операций
- Использование Flow для реактивного обновления UI

### 5. ✅ Сетевое взаимодействие
- **Retrofit + OkHttp** — готовая интеграция REST API
- Настроенный клиент для загрузки рецептов из сети
- **Coil** — загрузка и кэширование изображений
- Обработка сетевых ошибок

### 6. ✅ Документация + README.md
- Полная документация проекта
- Описание архитектуры и структуры
- Инструкции по запуску и использованию

### 7. ✅ Обфускация кода
- **Полная обфускация** всего приложения с помощью R8/ProGuard
- Агрессивные правила обфускации для максимальной защиты
- Обфускация включена как для debug, так и для release сборок
- Защита от обратной разработки (reverse engineering)
- Подробная документация в [OBFUSCATION.md](OBFUSCATION.md)

### 8. ✅ Комплексное тестирование
- **Unit тесты** для всех слоев приложения (Repository, ViewModels, DataStore)
- **Instrumented тесты** для Room DAO и UI компонентов
- Покрытие тестами: Repository (100%), ViewModels (100%), DAO (100%)
- Использование Mockito, Coroutines Test, Room Testing
- Подробная документация в [app/src/test/README.md](app/src/test/README.md)

## Стек технологий

- **Язык**: Kotlin
- **UI Framework**: Jetpack Compose + Material3
- **Навигация**: Navigation Compose
- **База данных**: Room
- **Хранилище настроек**: DataStore Preferences
- **Сеть**: Retrofit + OkHttp + Gson
- **Изображения**: Coil
- **Корутины**: Kotlinx Coroutines
- **Обфускация**: R8/ProGuard (полная обфускация)
- **Тестирование**: JUnit, Mockito, Robolectric, Espresso

## Структура проекта

```
app/src/main/java/com/example/recipes/
├── data/
│   ├── local/
│   │   ├── RecipeDao.kt              # DAO для работы с БД
│   │   ├── RecipeDatabase.kt         # Конфигурация Room
│   │   └── UserPreferencesManager.kt # Управление DataStore
│   ├── model/
│   │   ├── Recipe.kt                 # Модель рецепта
│   │   ├── User.kt                   # Модель пользователя
│   │   └── Category.kt               # Модель категории
│   ├── remote/
│   │   ├── RecipeApiService.kt       # API сервис
│   │   └── RetrofitClient.kt         # Конфигурация Retrofit
│   └── repository/
│       └── RecipeRepository.kt       # Репозиторий для работы с данными
├── ui/
│   ├── components/
│   │   ├── AnimatedFavoriteButton.kt # Кастомная кнопка избранного
│   │   ├── ProgressBadge.kt          # Индикатор сложности
│   │   └── RecipeCard.kt             # Карточка рецепта
│   ├── navigation/
│   │   ├── AppNavigation.kt          # Навигационный граф
│   │   └── Screen.kt                 # Определение экранов
│   ├── screens/
│   │   ├── HomeScreen.kt             # Главный экран
│   │   ├── CatalogScreen.kt          # Каталог рецептов
│   │   ├── RecipeDetailScreen.kt     # Детали рецепта
│   │   ├── AddRecipeScreen.kt        # Добавление рецепта
│   │   ├── ProfileScreen.kt          # Профиль пользователя
│   │   └── *ViewModel.kt             # ViewModels для экранов
│   └── theme/
│       ├── Color.kt                  # Цветовая палитра
│       ├── Theme.kt                  # Тема приложения
│       └── Type.kt                   # Типографика
├── MainActivity.kt                   # Главная активность
└── RecipesApplication.kt             # Application класс
```

## Функциональность

### Главный экран (Home)
- Поиск рецептов по названию и описанию
- Фильтрация по категориям (Завтрак, Обед, Ужин, Десерт, Закуска)
- Отображение популярных рецептов
- Быстрое добавление в избранное

### Каталог (Catalog)
- Полный список всех рецептов
- Прокрутка списка
- Переход к детальной информации

### Детали рецепта (Recipe Detail)
- Изображение рецепта
- Время приготовления, количество порций, категория
- Индикатор сложности
- Список ингредиентов
- Пошаговые инструкции
- Добавление/удаление из избранного

### Добавление рецепта (Add Recipe)
- Форма с валидацией
- Поля: название, описание, ингредиенты, инструкции
- Выбор времени приготовления и количества порций
- Выбор категории и сложности
- Опциональная ссылка на изображение

### Профиль (Profile)
- Форма входа/регистрации
- Сохранение данных пользователя
- Выход из аккаунта
- Управление настройками

## Запуск проекта

### Требования
- Android Studio (Giraffe или новее)
- JDK 17 или выше
- Android SDK 34
- Минимальная версия Android: 7.0 (API 24)

### Инструкции по запуску
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/OxYxOv/recipes-book.git
   cd recipes-book
   ```

2. Откройте проект в Android Studio

3. Дождитесь синхронизации Gradle

4. Запустите приложение на эмуляторе или физическом устройстве

### Release сборка
Release сборка включает полную обфускацию кода с помощью R8/ProGuard:
```bash
./gradlew assembleRelease
```

Правила ProGuard настроены в `app/proguard-rules.pro`. Подробная документация по обфускации доступна в [OBFUSCATION.md](OBFUSCATION.md).

### Тестирование
Приложение включает полный набор тестов:

**Unit тесты:**
```bash
./gradlew test
```

**Instrumented тесты (требуется эмулятор/устройство):**
```bash
./gradlew connectedAndroidTest
```

Подробная документация по тестам доступна в [app/src/test/README.md](app/src/test/README.md).

## API Integration

Приложение готово для интеграции с REST API. Базовый URL можно настроить в `RetrofitClient.kt`:

```kotlin
private const val BASE_URL = "https://api.example.com/api/"
```

Поддерживаемые эндпоинты:
- `GET /recipes` — получение списка рецептов
- `GET /recipes/{id}` — получение рецепта по ID
- `GET /recipes/category/{category}` — получение рецептов по категории
- `POST /recipes` — создание нового рецепта
- `PUT /recipes/{id}` — обновление рецепта
- `DELETE /recipes/{id}` — удаление рецепта

## Особенности реализации

### Архитектура
- **MVVM** (Model-View-ViewModel) паттерн
- **Repository** паттерн для работы с данными
- **Single Source of Truth** через Room Database
- Разделение на слои: Data, Domain, Presentation

### Реактивность
- Использование Flow для реактивного обновления данных
- StateFlow для состояния UI
- Корутины для асинхронных операций

### Современный UI
- Полностью на Jetpack Compose
- Material3 Design System
- Адаптивный дизайн
- Плавные анимации

### Оффлайн поддержка
- Все данные кэшируются локально в Room
- Приложение работает без подключения к интернету
- Синхронизация с сервером при наличии сети

## Примеры рецептов

При первом запуске приложение автоматически добавляет несколько примеров рецептов:
- Омлет с овощами (Завтрак)
- Борщ (Обед)
- Куриные котлеты (Ужин)
- Шоколадный кекс (Десерт)
- Цезарь салат (Закуска)
- Лазанья (Ужин)

## Разработка

### Добавление новых экранов
1. Создайте новый Screen в `ui/screens/`
2. Добавьте ViewModel при необходимости
3. Зарегистрируйте в `AppNavigation.kt`
4. Добавьте в Bottom Navigation при необходимости

### Добавление новых компонентов
1. Создайте компонент в `ui/components/`
2. Используйте в нужных экранах
3. Следуйте Material3 Design guidelines

## Лицензия

MIT License - см. LICENSE файл для подробностей

## Автор

Разработано для демонстрации навыков Android разработки с использованием современного стека технологий.
